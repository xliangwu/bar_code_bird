(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1f37f269"],{"06e0":function(e,t,a){"use strict";a("1922")},1922:function(e,t,a){},"69f8":function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return n}));var o=a("b775");function r(e){return Object(o["a"])({url:"/v1/print/loadMetaData",method:"get",params:e})}function i(e){return Object(o["a"])({url:"/v1/print/preview",method:"post",headers:{"Content-Type":"application/json"},data:e})}function n(e){return Object(o["a"])({url:"/v1/print/print",method:"post",headers:{"Content-Type":"application/json"},data:e})}},efe5:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"供应商"}},[a("el-input",{staticStyle:{width:"35%"},attrs:{disabled:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"模板",prop:"templateId"}},[a("el-select",{attrs:{placeholder:"选择模板",filterable:!0,"value-key":"id"},on:{change:e.changeTemplate},model:{value:e.form.templateId,callback:function(t){e.$set(e.form,"templateId",t)},expression:"form.templateId"}},e._l(e.templates,(function(e){return a("el-option",{key:e.id,attrs:{label:e.title,value:e}})})),1)],1),a("el-form-item",{attrs:{label:"机器编号",prop:"machineName"}},[a("el-select",{attrs:{placeholder:"选择机器编号","value-key":"id"},model:{value:e.form.machineName,callback:function(t){e.$set(e.form,"machineName",t)},expression:"form.machineName"}},e._l(e.machines,(function(e){return a("el-option",{key:e.id,attrs:{label:e.machineName,value:e.machineName}})})),1)],1),a("el-form-item",{attrs:{label:"接单卡号",prop:"orderNo"}},[a("el-select",{attrs:{placeholder:"选择接单卡号",filterable:!0,"value-key":"id"},on:{change:e.orderOptionChange},model:{value:e.form.orderNo,callback:function(t){e.$set(e.form,"orderNo",t)},expression:"form.orderNo"}},e._l(e.commodities,(function(e){return a("el-option",{key:e.id,attrs:{label:e.col1,value:e}})})),1)],1),a("el-form-item",{attrs:{label:"品名"}},[a("el-input",{staticStyle:{width:"35%"},attrs:{disabled:""},model:{value:e.form.productCode,callback:function(t){e.$set(e.form,"productCode",t)},expression:"form.productCode"}})],1),a("el-form-item",{attrs:{label:"规格"}},[a("el-input",{staticStyle:{width:"35%"},attrs:{disabled:""},model:{value:e.form.specification,callback:function(t){e.$set(e.form,"specification",t)},expression:"form.specification"}})],1),a("el-form-item",{attrs:{label:"SAP代码"}},[a("el-input",{staticStyle:{width:"35%"},attrs:{disabled:""},model:{value:e.form.sapCode,callback:function(t){e.$set(e.form,"sapCode",t)},expression:"form.sapCode"}})],1),a("el-form-item",{attrs:{label:"日期",prop:"selectedDate"}},[a("el-col",{attrs:{span:12}},[a("el-date-picker",{staticStyle:{width:"30%"},attrs:{type:"date",format:"yyyy年MM月dd日","value-format":"yyyyMMdd",placeholder:"选择日期"},model:{value:e.form.selectedDate,callback:function(t){e.$set(e.form,"selectedDate",t)},expression:"form.selectedDate"}})],1)],1),a("el-form-item",{attrs:{label:"箱容量"}},[a("el-input",{staticStyle:{width:"35%"},model:{value:e.form.capacity,callback:function(t){e.$set(e.form,"capacity",t)},expression:"form.capacity"}})],1),a("el-form-item",{attrs:{label:"起始页数"}},[a("el-input-number",{staticStyle:{width:"150px"},attrs:{step:1,size:"medium",min:1,max:5e3},model:{value:e.form.startIndex,callback:function(t){e.$set(e.form,"startIndex",t)},expression:"form.startIndex"}})],1),a("el-form-item",{attrs:{label:"打印份数"}},[a("el-input-number",{staticStyle:{width:"150px"},attrs:{step:1,size:"medium",min:1,max:5e3},model:{value:e.form.printCount,callback:function(t){e.$set(e.form,"printCount",t)},expression:"form.printCount"}})],1),a("el-form-item",[a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{icon:"el-icon-view"},on:{click:function(t){return e.onPreview("form")}}},[e._v("预览")])],1),a("el-col",{attrs:{span:2}}),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{icon:"el-icon-printer",type:"primary"},on:{click:function(t){return e.printPdf("form")}}},[e._v("打印")])],1)],1)],1),a("el-dialog",{staticStyle:{padding:"0px 8px"},attrs:{title:"预览",visible:e.previewDialogVisible,"before-close":e.beforeClosePreviewDialog,center:!0},on:{"update:visible":function(t){e.previewDialogVisible=t}}},[a("div",{staticClass:"previewContainer",domProps:{innerHTML:e._s(e.templateHtml)}})])],1)},r=[],i=a("69f8"),n=a("add5"),l=a.n(n),c={data:function(){return{form:{name:"上海福助工业有限公司",orderNo:"",machineName:"",selectedDate:new Date,startIndex:1,printCount:1,capacity:"",productCode:"",productName:"",sapCode:"",specification:"",templateId:null},templateHtml:"",templateContent:"",rules:{machineName:[{required:!0,message:"请输入机器编号",trigger:"blur"}],orderNo:[{required:!0,message:"请选择接单卡号",trigger:"change"}],templateId:[{required:!0,message:"请选择模板",trigger:"change"}],selectedDate:[{type:"date",required:!0,message:"请选择日期",trigger:"change"}]},commodities:[],machines:[],templates:[],previewDialogVisible:!1}},created:function(){this.loadMetaData()},methods:{printPdf:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;var a={templateContent:t.templateContent,specification:t.form.specification,machineCode:t.form.machineName,selectedDate:t.form.selectedDate,startIndex:t.form.startIndex,printCount:t.form.printCount,capacity:t.form.capacity,sapCode:t.form.sapCode,productCode:t.form.productCode,productName:t.form.productName};Object(i["c"])(a).then((function(e){var t=e.data;l()({printable:t,type:"pdf",showModal:!0,base64:!0,modalMessage:"正在生成待打印的内容"})}))}))},onPreview:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;var a={templateContent:t.templateContent,specification:t.form.specification,machineCode:t.form.machineName,selectedDate:t.form.selectedDate,startIndex:t.form.startIndex,printCount:t.form.printCount,capacity:t.form.capacity,sapCode:t.form.sapCode,productCode:t.form.productCode,productName:t.form.productName};Object(i["b"])(a).then((function(e){t.previewDialogVisible=!0,t.templateHtml=e.data}))}))},beforeClosePreviewDialog:function(){console.log("call before close dialog"),this.previewDialogVisible=!1},changeTemplate:function(e){this.templateContent=e.content},orderOptionChange:function(e){this.form.capacity=e.col6,this.form.productName=e.col4,this.form.productCode=e.col3,this.form.sapCode=e.col2,this.form.specification=e.col5},loadMetaData:function(){var e=this;this.listLoading=!0,Object(i["a"])().then((function(t){console.log(t.data.machines.length),e.commodities=t.data.commodities,e.machines=t.data.machines,e.templates=t.data.templates}))}}},s=c,m=(a("06e0"),a("2877")),d=Object(m["a"])(s,o,r,!1,null,null,null);t["default"]=d.exports}}]);